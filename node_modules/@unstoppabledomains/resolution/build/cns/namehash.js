"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var js_sha3_1 = require("js-sha3");
function default_1(domain, _a) {
    var _b = _a === void 0 ? { prefix: true } : _a, parent = _b.parent, prefix = _b.prefix;
    parent =
        parent ||
            '0000000000000000000000000000000000000000000000000000000000000000';
    var assembledHash = [parent]
        .concat(domain
        .split('.')
        .reverse()
        .filter(function (label) { return label; }))
        .reduce(function (parent, label) { return childhash(parent, label, { prefix: false }); });
    return prefix ? '0x' + assembledHash : assembledHash;
}
exports.default = default_1;
function childhash(parent, label, options) {
    if (options === void 0) { options = { prefix: true }; }
    parent = parent.replace(/^0x/, '');
    var childHash = js_sha3_1.keccak_256(label);
    var mynode = js_sha3_1.keccak_256(Buffer.from(parent + childHash, 'hex'));
    return (options.prefix ? '0x' : '') + mynode;
}
exports.childhash = childhash;
