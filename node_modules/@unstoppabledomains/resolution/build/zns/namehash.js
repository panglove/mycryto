"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
var sha3_1 = __importDefault(require("../utils/sha3"));
exports.namehash = function (name, _a) {
    if (name === void 0) { name = ''; }
    var _b = _a === void 0 ? { prefix: true } : _a, parent = _b.parent, prefix = _b.prefix;
    parent =
        parent ||
            '0000000000000000000000000000000000000000000000000000000000000000';
    var address = [parent]
        .concat(name
        .split('.')
        .reverse()
        .filter(function (label) { return label; }))
        .reduce(function (parent, label) { return exports.childhash(parent, label, { prefix: false }); });
    return prefix ? '0x' + address : address;
};
exports.childhash = function (parent, child, options) {
    if (options === void 0) { options = { prefix: true }; }
    parent = parent.replace(/^0x/, '');
    return sha3_1.default(parent + sha3_1.default(child, { hexPrefix: false }), {
        hexPrefix: options.prefix,
        inputEnc: 'hex',
    });
};
exports.default = exports.namehash;
